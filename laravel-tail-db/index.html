<!DOCTYPE html>
<html lang="en">
<head>
	<title>Laravel Tail DB - Monitor Realtime SQL query executed from your application.</title>
	<!-- Meta -->
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta name="keywords" content="Monitor SQL Query, Troubleshooting SQL query, Optimize SQL query">
	<meta name="description" content="Continuously monitor and optimize SQL query from console">
	<link rel="shortcut icon" href="favicon.ico">
	<!-- Google Font -->
	<link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700&display=swap" rel="stylesheet">

	<!-- FontAwesome JS-->
	<script defer src="assets/fontawesome/js/all.min.js"></script>

	<!-- Plugins CSS -->
	<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.2/styles/atom-one-dark.min.css">

	<!-- Theme CSS -->
	<link id="theme-style" rel="stylesheet" href="assets/css/theme.css">

</head>

<body class="docs-page">
<header class="header fixed-top">
	<div class="branding docs-branding">
		<div class="container-fluid position-relative py-2">
			<div class="docs-logo-wrapper">
				<button id="docs-sidebar-toggler" class="docs-sidebar-toggler docs-sidebar-visible mr-2 d-xl-none" type="button">
					<span></span>
					<span></span>
					<span></span>
				</button>
				<div class="site-logo"><a class="navbar-brand" href="/laravel-tail-db">
					<span class="logo-text">Laravel <span class="text-alt">Tail DB</span></span>
				</a></div>
			</div><!--//docs-logo-wrapper-->

			<div class="docs-top-utilities d-flex justify-content-end align-items-center">
				<ul class="social-list list-inline mx-md-3 mx-lg-5 mb-0 d-none d-lg-flex">
					<li class="list-inline-item"><a href="https://github.com/muhdfaiz/laravel-tail-db"><svg class="svg-inline--fa fa-github fa-w-16 fa-fw" aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" data-fa-i2svg=""><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg><!-- <i class="fab fa-github fa-fw"></i> Font Awesome fontawesome.com --></a></li>
				</ul><!--//social-list-->
			</div>
		</div><!--//container-->
	</div><!--//branding-->
</header><!--//header-->

<div class="docs-wrapper">
	<div id="docs-sidebar" class="docs-sidebar">
		<nav id="docs-nav" class="docs-nav navbar">
			<ul class="section-items list-unstyled nav flex-column pb-3">
				<li class="nav-item section-title"><a class="nav-link scrollto active" href="#introduction"><span class="theme-icon-holder mr-2"><i class="fas fa-book-reader"></i></span>Getting Started</a></li>
				<li class="nav-item"><a class="nav-link scrollto" href="#introduction">Introduction</a></li>
				<li class="nav-item"><a class="nav-link scrollto" href="#compatibility">Compatibility</a></li>
				<li class="nav-item"><a class="nav-link scrollto" href="#requirements">Requirements</a></li>
				<li class="nav-item"><a class="nav-link scrollto" href="#installation">Installation</a></li>
				<li class="nav-item"><a class="nav-link scrollto" href="#changelog">Changelog</a></li>

				<li class="nav-item section-title mt-3"><a class="nav-link scrollto" href="#usage"><span class="theme-icon-holder mr-2"><i class="fas fa-cogs"></i></span>Usage</a></li>
				<li class="nav-item section-title mt-3"><a class="nav-link scrollto" href="#faq"><span class="theme-icon-holder mr-2"><i class="fas fa-lightbulb"></i></span>FAQ</a></li>
			</ul>

		</nav><!--//docs-nav-->
	</div><!--//docs-sidebar-->
	<div class="docs-content">
		<div class="container">
			<article class="docs-article" id="introduction">
				<section class="docs-section">
					<h1 class="section-heading">Introduction</h1>
					<p>
						This package allow you to monitor realtime sql query executed in your application from the terminal.
						When you run the command, it will listen to any SQL query executed and output the query data.
					</p>

					<p>This package maybe useful if you want to detect slow query and optimize sql query. Instead you run
					manually the explain command, this package automatically run it for you. From the explain result
					you can check if the query missing and index and other things.</p>

					<p>Below are the information you can get from the query data.</p>
					<ul>
						<li>URL that trigger the SQL query.</li>
						<li>File name including line number that trigger the SQL query in your application.</li>
						<li>Raw SQL query executed including time taken for the query to complete.</li>
						<li>Explain result.</li>
					</ul>
					<br>
					<p><b>Example output when running PostgreSQL:</b></p>
					<img style="width: 80%" src="assets/images/postgresql.png">
				</section>
			</article>

			<article class="docs-article" id="compatibility">
				<section class="docs-section">
					<h1 class="section-heading">Compatibility</h1>
					<br>
					<h3>List Of Database Supported</h3>

					<ul>
						<li>MySQL</li>
						<li>PostgreSQL</li>
						<li>Sqlite</li>
						<li>Sql Server</li>
					</ul>

					<div class="callout-block callout-block-info">
						<div class="content">
							<h4 class="callout-title">
								<span class="callout-icon-holder mr-1">
									<svg class="svg-inline--fa fa-info-circle fa-w-16" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="info-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"></path></svg><!-- <i class="fas fa-info-circle"></i> Font Awesome fontawesome.com -->
								</span><!--//icon-holder-->
								Note
							</h4>
							<p>For SQL Server, you can't see the explain result since SQL Server don't have the explain command.</p>
						</div><!--//content-->
					</div>
				</section>
			</article>

			<article class="docs-article" id="requirements">
				<section class="docs-section">
					<h1 class="section-heading">Requirements</h1>
					<br>

					<ul>
						<li>PHP: <code>^7.0</code></li>
						<li>Laravel: <code>~5.5, ~5.6, ~5.7, ~5.8, ~6.0, ~7.0, ~8.0</code></li>
					</ul>
				</section>
			</article>

			<article class="docs-article" id="installation">
				<section class="docs-section">
					<h1 class="section-heading">Installation</h1>
					<br>

					<p>Require this package in the composer.json of your Laravel project. This will download the package</p>

					<pre>
						<code class="language-bash hljs bash">
composer require muhdfaiz/laravel-tail-db
						</code>
					</pre>

					<br>
					<p>The <code>Muhdfaiz\LaravelTailDb\TailDatabaseServiceProvider</code> is auto-discovered and registered by default.</p>
					<br>

					<p>Next, you need to publish the Laravel Tail DB configuration file:</p>

					<pre>
						<code class="language-bash hljs bash">
php artisan vendor:publish --provider="Muhdfaiz\LaravelTailDb\TailDatabaseServiceProvider" --tag="tail-db-config"
						</code>
					</pre>

					<br>
					<p>This is the default content of the config file that will be published as config/tail-db.php:</p>

					<pre><code class="language-php hljs php" data-lang="php" style="font-size: 1rem">
return [
    /*
    |--------------------------------------------------------------------------
    | Status
    |--------------------------------------------------------------------------
    |
    | This option used to enable or disable the Laravel Tail DB watcher.
    | If enabled, every sql query executed from the application will
    | be captured and store the query in the log file if you enabled the
    | query option.
    |
    */
    'enabled' => env('TAIL_DB_ENABLED', true),

    /*
    |--------------------------------------------------------------------------
    | Host
    |--------------------------------------------------------------------------
    |
    | Laravel Tail DB use ReactPHP to monitor the SQL query. When you run
    | 'tail:db' command, it will start the ReactPHP Server. ReactPHP Server
    | will use this host when starting the server.
    |
    */
    'host' => env('TAIL_DB_HOST', '0.0.0.0'),

    /*
    |--------------------------------------------------------------------------
    | Port
    |--------------------------------------------------------------------------
    |
    | Laravel Tail DB use ReactPHP to monitor the SQL query. When you run
    | 'tail:db' command, it will start the ReactPHP Server. ReactPHP Server
    | will use this port when starting the server.
    */
    'port' => env('TAIL_DB_PORT', '9001'),

    /*
    |--------------------------------------------------------------------------
    | Duration of time to considered as slow query.
    |--------------------------------------------------------------------------
    |
    | This option used to tell Laravel Tail DB if the query slow or not.
    | For example, if you specify 2000ms and the last query executed take
    | more than 2000ms, Laravel Tail DB will highlight the time with red color.
    | If the query below than 2000ms Laravel Tail DB will highlight with green color.
    | The value must be in milliseconds.
    */
    'slow_duration' => env('TAIL_DB_SLOW_DURATION', 3000),

    /*
    |--------------------------------------------------------------------------
    | Ignore queries
    |--------------------------------------------------------------------------
    |
    | You can specify the keyword to skip the tailing.
    | Laravel Tail DB will check if the query contain those keyword or not.
    | If exist, Laravel Tail DB will skip recording to log file.
    | The key keyword must be separated by comma.
    | Example: alter table}drop table. (Separated by |)
    |
    */
    'ignore_query_keyword' => env('TAIL_DB_IGNORE_QUERY_KEYWORD', ''),

    /*
    |--------------------------------------------------------------------------
    | Log Query
    |--------------------------------------------------------------------------
    |
    | Option to specify if you want to store the SQL query in the log file.
    |
    */
    'log_query' => env('TAIL_DB_LOG_QUERY', false),

    /*
    |--------------------------------------------------------------------------
    | Filename to store mysql queries log
    |--------------------------------------------------------------------------
    |
    | Default filename is database.log
    |
    */
    'filename' => env('TAIL_DB_FILENAME', 'database.log'),

    /*
    |--------------------------------------------------------------------------
    | Path to store sql queries log.
    |--------------------------------------------------------------------------
    |
    | Default path is inside storage/logs.
    |
    */
    'path' => env('TAIL_DB_PATH', storage_path('logs')),

    /*
    |--------------------------------------------------------------------------
    | Show explain sql during the tail.
    |--------------------------------------------------------------------------
    |
    | By default every sql query executed, laravel tail db will run explain
    | command. Useful if you want to troubleshooting performance issue.
    | If turn off, Laravel Tail DB only show the query executed, the time and
    | the location where the query executed.
    */
    'show_explain' => env('TAIL_DB_SHOW_EXPLAIN', true),
];
				</code></pre>


				</section>
			</article>

			<article class="docs-article" id="changelog">
				<section class="docs-section">
					<h1 class="section-heading">Changelog</h1>
					<br>
					<p>All the change are documented in Github. You can view <a href="https://github.com/muhdfaiz/laravel-tail-db/blob/master/CHANGELOG.md">Github</a> </p>
				</section>
			</article>

			<article class="docs-article" id="usage">
				<section class="docs-section">
					<h1 class="section-heading">Usage</h1>
					<br>

					<p>Run the command below to start listening for the SQL query.</p>

					<pre>
						<code class="language-bash hljs bash">
php artisan tail:db
						</code>
					</pre>

					<div class="callout-block callout-block-info">
						<div class="content">
							<h4 class="callout-title">
								<span class="callout-icon-holder mr-1">
									<svg class="svg-inline--fa fa-info-circle fa-w-16" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="info-circle" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M256 8C119.043 8 8 119.083 8 256c0 136.997 111.043 248 248 248s248-111.003 248-248C504 119.083 392.957 8 256 8zm0 110c23.196 0 42 18.804 42 42s-18.804 42-42 42-42-18.804-42-42 18.804-42 42-42zm56 254c0 6.627-5.373 12-12 12h-88c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h12v-64h-12c-6.627 0-12-5.373-12-12v-24c0-6.627 5.373-12 12-12h64c6.627 0 12 5.373 12 12v100h12c6.627 0 12 5.373 12 12v24z"></path></svg><!-- <i class="fas fa-info-circle"></i> Font Awesome fontawesome.com -->
								</span><!--//icon-holder-->
								Note
							</h4>
							<p>By default, Laravel Tail DB will not captured query related to migration like <code>create table</code>, <code>update table</code>, <code>alter table</code> and others.</p>
						</div><!--//content-->
					</div>

					<br>

					<h3>How It Works</h3>
					<br>
					<p>When you installed Laravel Tail DB, the service provider will registered the event to captured SQL query executed from your application.</p>
					<p>Any of the SQL query captured by Laravel Tail DB will be sent to ReactPHP Server.</p>
					<p>When you run the <code>tail:db</code> command, the ReactPHP Server also started and ready to receive any sql query data captured.</p>
					<p>When received new SQL query data, it will output to console.</p>

					<br>
					<h3>Result</h3>
					<br>

					<p>For the output of the duration to complete the query, got 2 colors</p>
					<ul>
						<li>Blue - Indicate the query not slow</li>
						<li>Red - Indicate the query slow</li>
					</ul>

					<p>You can update the <code>slow_duration</code> config to <code>false</code> which you think suitable with your preferences. </p>
					<p>You also can disable the explain query if you want to show it. You can update the <code>show_explain</code> config to <code>false</code></p>

					<br><br>
					<h3>Sample MySQL Output</h3>
					<br>
					<img src="assets/images/mysql.png" style="width: 100%">

					<br><br><br>
					<h3>Sample PostgreSQL Output</h3>
					<br>
					<img src="assets/images/postgresql.png" style="width: 100%">

					<br><br><br>
					<h3>Sample SQLite Output</h3>
					<br>
					<img src="assets/images/sqlite.png" style="width: 100%">
				</section>
			</article>

			<article class="docs-article" id="faq">
				<section class="docs-section">
					<h1 class="section-heading">FAQ</h1>
					<h3 class="pt-3"><i class="fas fa-question-circle mr-1"></i>How to disable the Laravel Tail DB?</h3>
					<p style="margin-top: 1rem; margin-left: 1.8rem">You can update the <code>enabled</code> config to false</p>
					<br>
					<h3 class="pt-3"><i class="fas fa-question-circle mr-1"></i>How to set custom duration of SQL query that considered slow? For example, I want query more than 1 seconds consider as slow query.</h3>
					<p style="margin-top: 1rem; margin-left: 1.8rem">You can update the <code>slow_duration</code> config. The value must be in milliseconds</p>
					<br>
					<h3 class="pt-3"><i class="fas fa-question-circle mr-1"></i>How to ignore some query? For example, I don't want to Laravel Tail DB listen the <code>telescope</code> query.</h3>
					<p style="margin-top: 1rem; margin-left: 1.8rem">You can update the <code>ignore_query_keyword</code> config. Laravel Tail DB will check if the query contain any of these keywords. If <code>true</code>, Laravel Tail DB will ignore it.
					If you want to specify multiple keyword, please separated the keyword by <code>|</code></p>

					<br>
					<h3 class="pt-3"><i class="fas fa-question-circle mr-1"></i>What if I only want to see the raw SQL query executed and want to hide the <code>explain</code> result</h3>
					<p style="margin-top: 1rem; margin-left: 1.8rem">You can update the <code>show_explain</code> config to <code>false</code></p>

					<br>
					<h3 class="pt-3"><i class="fas fa-question-circle mr-1"></i>What if I want to store the query in the log file?</h3>
					<p style="margin-top: 1rem; margin-left: 1.8rem">You can update the <code>log_query</code> config to <code>true</code>. If you set to <code>true</code></p>

					<br>
					<h3 class="pt-3"><i class="fas fa-question-circle mr-1"></i>How to change the path and file name that will be used to store the data.</h3>
					<p style="margin-top: 1rem; margin-left: 1.8rem">You can update the <code>path</code> config and <code>filename</code> config</p>
			</article>

		</div>
	</div>
</div><!--//docs-wrapper-->

<!-- Javascript -->
<script src="assets/plugins/jquery-3.4.1.min.js"></script>
<script src="assets/plugins/popper.min.js"></script>
<script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>


<!-- Page Specific JS -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
<script src="assets/js/highlight-custom.js"></script>
<script src="assets/plugins/jquery.scrollTo.min.js"></script>
<script src="assets/plugins/lightbox/dist/ekko-lightbox.min.js"></script>
<script src="assets/js/docs.js"></script>
<script>
	$( document ).ready(function() {
		$(document.body).find("pre code").each(function() {
			$(this).html($.trim($(this).html()));
		});
	});
</script>
</body>
</html> 

